webpackJsonp([1],[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){return p["default"].extend(t,{dispatch:B.dispatch}),i["default"].createElement(e,t)}var o=n(1),i=a(o),l=n(3),s=n(14),u=n(5),c=n(41),d=a(c),f=n(7),p=a(f),m=n(29),h=a(m),v=n(54),b=a(v),g=n(44),y=a(g),E=n(51),O=a(E),_=n(52),w=a(_),P=n(49),N=a(P),k=n(50),S=a(k),j=n(45),x=a(j),I=n(47),R=a(I),M=n(46),C=a(M),T=n(48),D=a(T),A=n(40),U=a(A),F=(0,h["default"])(),B=void 0,L=(0,l.compose)((0,l.applyMiddleware)(d["default"]),(0,U["default"])(["user"],{key:"BARRAGE"}))(l.createStore);B=L(b["default"]),i["default"].render(i["default"].createElement(s.Provider,{store:B},function(){return i["default"].createElement(u.Router,{history:F,createElement:r},i["default"].createElement(u.Route,{component:y["default"]},i["default"].createElement(u.Redirect,{from:"/",to:"/signin"}),i["default"].createElement(u.Route,{path:"signin",component:O["default"]}),i["default"].createElement(u.Route,{path:"signup",component:w["default"]}),i["default"].createElement(u.Route,{path:"dashboard",component:N["default"]},i["default"].createElement(u.Route,{path:"binds"},i["default"].createElement(u.Route,{path:"create",component:x["default"]}),i["default"].createElement(u.Route,{path:":id/edit",component:x["default"]}),i["default"].createElement(u.Redirect,{from:"/dashboard/binds/:id",to:"/dashboard/binds/:id/index"}),i["default"].createElement(u.Route,{path:":id",component:R["default"]},i["default"].createElement(u.Route,{path:"index",component:C["default"]}),i["default"].createElement(u.Route,{path:"chat",component:D["default"]})))),i["default"].createElement(u.Route,{path:"*",component:S["default"]})))}),document.getElementById("app"))},,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t}function o(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e.json(),t}function i(e){return e.json()}function l(e){var t=e.url,n=e.method,a=e.body,r=e.callback,l=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return new p.Promise(function(e,s){var u={method:n,credentials:"include",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}};a&&(u=h["default"].extend(u,{body:JSON.stringify(a)})),(0,b["default"])(""+f.SERVER_URL+t,u).then(o).then(i).then(function(t){l?l(r(t)):r(t),e(t)})["catch"](function(e){e.response.then(function(e){return s(e)})})})}function s(e){var t=e.url,n=e.method,a=e.body,r=e.callback;return function(e){return l({url:t,method:n,body:a,callback:r},e)}}function u(e,t,n){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,n);else if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveStart("character",t),a.moveEnd("character",n),a.select(),e.focus()}else"undefined"!=typeof e.selectionStart&&(e.selectionStart=t,e.selectionEnd=n,e.focus())}function c(e){var t,n,a,r,o,i=0,l=0;return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?(i=e.selectionStart,l=e.selectionEnd):(n=document.selection.createRange(),n&&n.parentElement()==e&&(r=e.value.length,t=e.value.replace(/\r\n/g,"\n"),a=e.createTextRange(),a.moveToBookmark(n.getBookmark()),o=e.createTextRange(),o.collapse(!1),a.compareEndPoints("StartToEnd",o)>-1?i=l=r:(i=-a.moveStart("character",-r),i+=t.slice(0,i).split("\n").length-1,a.compareEndPoints("EndToEnd",o)>-1?l=r:(l=-a.moveEnd("character",-r),l+=t.slice(0,l).split("\n").length-1)))),{start:i,end:l}}function d(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in n)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=r,t.fetchCheckStatus=o,t.fetchParseJSON=i,t.fetchAPI=l,t.fetchAPIWithDispatch=s,t.setSelectRange=u,t.getInputSelection=c,t.dateFormat=d;var f=n(8),p=n(27),m=n(7),h=a(m),v=n(39),b=a(v)},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(4);n(53);var a=n(83),r="/dist/icons/sprites.svg";t.SVG_URL=r;var o="common";t.COMMON_STYLE_CLASS=o;var i="",l="stage";"development"===l?t.SERVER_URL=i="http://localhost:3000/api":"production"===l?t.SERVER_URL=i="http://barrage.avosapps.com/api":t.SERVER_URL=i="http://dev.barrage.avosapps.com/api",t.SERVER_URL=i;var s=window.APP_ID||"QxddDjo7gVnzx0A7pMyV9Ekq";t.APP_ID=s;var u=window.APP_KEY||"iOhvvhJo95T4LEp2jiG8W1fK";t.APP_KEY=u;var c=AV.push({appId:s,appKey:u});t.PUSH=c,t.MP=a.MP},,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=h["default"].clone(e);switch(t.type){case E:case O:return t.data.binds;case g:var a=h["default"].findIndex(n,function(e){return e.objectId===t.data.bind.objectId});return n[a]=t.data.bind,n;case b:return n.push(t.data.bind),n;case y:return h["default"].remove(n,function(e){return e.objectId===t.data.bind.objectId}),n;default:return e}}function o(e){return{type:b,data:{bind:e}}}function i(e){return{type:g,data:{bind:e}}}function l(e){return{type:y,data:{bind:e}}}function s(e){return{type:O,data:{binds:e}}}function u(){return{type:E,data:{binds:[]}}}function c(e){return(0,v.fetchAPIWithDispatch)({url:"/binds",method:"post",body:e,callback:o})}function d(e,t){return(0,v.fetchAPIWithDispatch)({url:"/binds/"+e,method:"put",body:t,callback:i})}function f(e){return(0,v.fetchAPIWithDispatch)({url:"/binds/"+e,method:"delete",callback:l})}function p(){return(0,v.fetchAPIWithDispatch)({url:"/binds",method:"get",callback:s})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r,t.createBind=o,t.updateBind=i,t.removeBind=l,t.fetchBinds=s,t.removeBinds=u,t.fetchAPIBindStore=c,t.fetchAPIBindUpdate=d,t.fetchAPIBindDelete=f,t.fetchAPIBinds=p;var m=n(7),h=a(m),v=n(4),b="app/binds/CREATE",g="app/binds/UPDATE",y="app/binds/REMOVE",E="app/binds/REMOVE_ALL",O="app/binds/FETCH"},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var a={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(a[o]=!0)}for(r=0;r<t.length;r++){var i=t[r];"number"==typeof i[0]&&a[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),e.push(i))}},e}},,,function(e,t,n){function a(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=d[a.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](a.parts[o]);for(;o<a.parts.length;o++)r.parts.push(l(a.parts[o],t))}else{for(var i=[],o=0;o<a.parts.length;o++)i.push(l(a.parts[o],t));d[a.id]={id:a.id,refs:1,parts:i}}}}function r(e){for(var t=[],n={},a=0;a<e.length;a++){var r=e[a],o=r[0],i=r[1],l=r[2],s=r[3],u={css:i,media:l,sourceMap:s};n[o]?n[o].parts.push(u):t.push(n[o]={id:o,parts:[u]})}return t}function o(){var e=document.createElement("style"),t=m();return e.type="text/css",t.appendChild(e),e}function i(){var e=document.createElement("link"),t=m();return e.rel="stylesheet",t.appendChild(e),e}function l(e,t){var n,a,r;if(t.singleton){var l=v++;n=h||(h=o()),a=s.bind(null,n,l,!1),r=s.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=i(),a=c.bind(null,n),r=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=o(),a=u.bind(null,n),r=function(){n.parentNode.removeChild(n)});return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else r()}}function s(e,t,n,a){var r=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var o=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function u(e,t){var n=t.css,a=t.media;t.sourceMap;if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function c(e,t){var n=t.css,a=(t.media,t.sourceMap);a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var r=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var d={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=f(function(){return document.head||document.getElementsByTagName("head")[0]}),h=null,v=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p());var n=r(e);return a(n,t),function(e){for(var o=[],i=0;i<n.length;i++){var l=n[i],s=d[l.id];s.refs--,o.push(s)}if(e){var u=r(e);a(u,t)}for(var i=0;i<o.length;i++){var s=o[i];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete d[s.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},s=n(1),u=a(s);n(79);var c=function(e){function t(){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"clearfix"})}}]),t}(s.Component);t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},s=n(1),u=a(s),c=n(8);n(80);var d=function(e){function t(){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"render",value:function(){var e="icon",t=this.props.size?e+"--"+this.props.size:"",n=e+" "+e+"--"+this.props.name+" "+t+" "+this.props.className,a='<use xlink:href="'+c.SVG_URL+"#icon--"+this.props.name+'" />',r=u["default"].createElement("svg",{className:e+"__cnt",dangerouslySetInnerHTML:{__html:a}});return""!==this.props.spinner&&(r=u["default"].createElement("div",{className:e+"__spinner "+e+"__spinner--"+this.props.spinner},r)),u["default"].createElement("div",{className:n},r)}}]),t}(s.Component);d.defaultProps={spinner:"",className:""},d.propTypes={spinner:s.PropTypes.string,size:s.PropTypes.string.isRequired,name:s.PropTypes.string.isRequired,className:s.PropTypes.string},t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},s=n(1),u=a(s),c=function(e){function t(e,n){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.state={show:!0}}return o(t,e),i(t,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"componentWillReceiveProps",value:function(e){this.setState({show:!0})}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.className;return u["default"].createElement("div",{className:"ui message "+n+" "+(this.state.show&&t?"visible":"hidden")},u["default"].createElement("p",null,t),u["default"].createElement("i",{className:"close icon",onClick:this.handleClose.bind(this)}))}}]),t}(s.Component);c.displayName="Message",c.defaultProps={className:"error"},c.propTypes={message:s.PropTypes.string.isRequired},t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];switch(t.type){case h:case m:return f["default"].assign({},t.data.user);case v:return{};default:return e}}function o(e){return{type:m,data:{user:e}}}function i(e){return{type:h,data:{user:e}}}function l(){return{type:v}}function s(e){return(0,p.fetchAPIWithDispatch)({url:"/auth/signin",method:"post",body:e,callback:o})}function u(e){return(0,p.fetchAPIWithDispatch)({url:"/auth/signup",method:"post",body:e,callback:o})}function c(){return(0,p.fetchAPIWithDispatch)({url:"/auth/signout",method:"get",callback:l})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r,t.createUser=o,t.updateUser=i,t.removeUser=l,t.signIn=s,t.signUp=u,t.signOut=c;var d=n(7),f=a(d),p=n(4),m="app/user/CREATE",h="app/user/UPDATE",v="app/user/REMOVE"},,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},s=n(1),u=a(s),c=n(5),d=n(8);n(77);var f=function(e){function t(e,n){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.state={loading:!1,confirm:!1,error:""}}return o(t,e),i(t,[{key:"handleSelect",value:function(e){e.target.select()}},{key:"handleConfirmDelete",value:function(){this.setState({confirm:!0})}},{key:"handleCancel",value:function(){this.setState({confirm:!1})}},{key:"handleDelete",value:function(){var e=this.props,t=e.actions,n=e.bind,a=e.history;return this.setState({loading:!0,confirm:!1,error:""}),function(e){t.fetchAPIBindDelete(n.objectId).then(function(e){a.pushState(null,"/dashboard")})["catch"](function(t){e.setState({error:t.message})}).then(function(){e.setState({loading:!1})})}(this),!1}},{key:"render",value:function(){var e=this.props.bind,t="";switch(parseInt(e.type)){case d.MP.SUBSCRIPTION:t="订阅号";break;case d.MP.SERVICE:t="服务号";break;default:t="未认证公众号"}return u["default"].createElement("div",{className:"ui segment"},u["default"].createElement("div",{className:"ui inverted dimmer "+(this.state.loading?"active":"")},u["default"].createElement("div",{className:"ui loader"})),u["default"].createElement("table",{className:"ui very basic selectable celled table"},u["default"].createElement("tbody",null,u["default"].createElement("tr",null,u["default"].createElement("td",{className:"two wide"},u["default"].createElement("div",{className:"ui ribbon label"},"名称")),u["default"].createElement("td",null,e.name)),u["default"].createElement("tr",null,u["default"].createElement("td",null,u["default"].createElement("div",{className:"ui ribbon label"},"类型")),u["default"].createElement("td",null,t)),u["default"].createElement("tr",null,u["default"].createElement("td",null,u["default"].createElement("div",{className:"ui ribbon label"},"appID")),u["default"].createElement("td",null,e.appId)),u["default"].createElement("tr",null,u["default"].createElement("td",null,u["default"].createElement("div",{className:"ui ribbon label"},"appSecret")),u["default"].createElement("td",null,e.appSecret)),u["default"].createElement("tr",null,u["default"].createElement("td",null,u["default"].createElement("div",{className:"ui ribbon label"},"Token")),u["default"].createElement("td",null,e.token)),u["default"].createElement("tr",null,u["default"].createElement("td",null,u["default"].createElement("div",{className:"ui ribbon label"},"Url")),u["default"].createElement("td",null,u["default"].createElement("div",{className:"ui input fluid"},u["default"].createElement("input",{type:"text",readOnly:!0,value:d.SERVER_URL+"/wechat/"+e.objectId,onClick:this.handleSelect.bind(this)})))),u["default"].createElement("tr",null,u["default"].createElement("td",null,u["default"].createElement("div",{className:"ui ribbon label"},"弹幕key")),u["default"].createElement("td",null,e.objectId)))),u["default"].createElement(c.Link,{to:"/dashboard/binds/"+e.objectId+"/edit",className:"ui button basic"},"编辑"),u["default"].createElement("a",{className:"ui inverted red button right floated",onClick:this.handleConfirmDelete.bind(this)},"删除"),u["default"].createElement("div",{className:"ui error message "+(this.state.error?"visible":"hidden")},this.state.error),u["default"].createElement("div",{className:"ui modal small "+(this.state.confirm?"active":"")},u["default"].createElement("div",{className:"header"},"确定删除公众号绑定 "+e.name+"？"),u["default"].createElement("div",{className:"content"},u["default"].createElement("p",null,"确定删除？")),u["default"].createElement("div",{className:"actions"},u["default"].createElement("div",{className:"ui negative button",onClick:this.handleCancel.bind(this)},"取消"),u["default"].createElement("div",{className:"ui positive button",onClick:this.handleDelete.bind(this)},"确定"))))}}]),t}(s.Component);t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=d["default"].clone(e);switch(t.type){case h:case m:return t.data.messages;case p:return n.push(t.data.message),n;default:return e}}function o(e){return{type:p,data:{message:e}}}function i(e){return{type:m,data:{messages:e}}}function l(){return{type:h,data:{messages:[]}}}function s(e){return(0,f.fetchAPIWithDispatch)({url:"/binds/"+e+"/messages",method:"get",callback:i})}function u(e,t){return(0,f.fetchAPI)({url:"/binds/"+e+"/messages",method:"post",body:t,callback:function(){}})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r,t.createMessage=o,t.fetchMessages=i,t.removeMessages=l,t.fetchAPIMessages=s,t.fetchAPIMessageSend=u;var c=n(7),d=a(c),f=n(4),p="app/messages/CREATE",m="app/messages/FETCH",h="app/messages/REMOVE"},,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},u=n(1),c=a(u),d=n(6),f=a(d),p=n(16),m=a(p),h=n(18),v=a(h),b=n(4),g=n(8),y=function(e){function t(e,n){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n);var a=this.props.bind,r=a.objectId,i=a.name,l=a.token,u=a.appId,c=a.appSecret,d=a.type;this.state={objectId:r,name:i,token:l,appId:u,appSecret:c,type:d,error:"",loading:!1}}return i(t,e),l(t,[{key:"handleRandomToken",value:function(e){e.preventDefault(),this.setState({token:(0,b.uuid)().substr(0,8)})}},{key:"handleCancel",value:function(e){e.preventDefault(),this.props.history.goBack()}},{key:"createBind",value:function(e){var t=e.name,n=e.token,a=e.appId,r=e.appSecret,o=e.type,i=this.props.actions;return i.fetchAPIBindStore({name:t,token:n,appId:a,appSecret:r,type:o})}},{key:"updateBind",value:function(e){var t=e.objectId,n=e.name,a=e.token,r=e.appId,o=e.appSecret,i=e.type,l=this.props.actions;return l.fetchAPIBindUpdate(t,{name:n,token:a,appId:r,appSecret:o,type:i})}},{key:"componentDidMount",value:function(){!function(e){e.refs.REF_TYPE_DROPDOWN_MENU&&(0,f["default"])(e.refs.REF_TYPE_DROPDOWN_MENU.getDOMNode()).dropdown({onChange:function(t){e.setState({type:t})}})}(this)}},{key:"componentDidUpdate",value:function(){this.refs.REF_TYPE_DROPDOWN_MENU&&(0,f["default"])(this.refs.REF_TYPE_DROPDOWN_MENU.getDOMNode()).dropdown("refresh")}},{key:"handleSave",value:function(e){e.preventDefault();var t=this.state,n=t.objectId,a=t.name,r=t.token,o=t.appId,i=t.appSecret,l=t.type,s=this.props.history,u=void 0;return this.setState({loading:!0,error:""}),u=n?this.updateBind({objectId:n,name:a,token:r,appId:o,appSecret:i,type:l}):this.createBind({name:a,token:r,appId:o,appSecret:i,type:l}),function(e){u.then(function(e){s.pushState(null,"/dashboard/binds/"+e.objectId)})["catch"](function(t){e.setState({error:t.message})}).then(function(){e.setState({loading:!1})})}(this)}},{key:"handleChange",value:function(e){this.setState(r({},e.target.name,e.target.value))}},{key:"render",value:function(){var e="新的公众号绑定";return this.state.objectId&&(e="修改公众号绑定--"+this.state.name),c["default"].createElement("div",null,c["default"].createElement("h3",{className:"ui horizontal divider header"},e),c["default"].createElement("div",{className:"ui segment stacked"},c["default"].createElement("div",{className:"ui inverted dimmer "+(this.state.loading?"active":"")},c["default"].createElement("div",{className:"ui loader"})),c["default"].createElement("form",{className:"ui form"},c["default"].createElement("div",{className:"inline fields"},c["default"].createElement("div",{className:"four wide field"},c["default"].createElement("label",{htmlFor:"name"},"名称")),c["default"].createElement("div",{className:"ten wide field"},c["default"].createElement("input",{id:"name",type:"text",name:"name",onChange:this.handleChange.bind(this),value:this.state.name,placeholder:"名称"}))),c["default"].createElement("div",{className:"inline fields"},c["default"].createElement("div",{className:"four wide field"},c["default"].createElement("label",{htmlFor:"name"},"公众号类型")),c["default"].createElement("div",{className:"ten wide field"},c["default"].createElement("select",{value:this.state.type,className:"ui dropdown",ref:"REF_TYPE_DROPDOWN_MENU",name:"type"},c["default"].createElement("option",{value:g.MP.COMMON},"未认证"),c["default"].createElement("option",{value:g.MP.SUBSCRIPTION},"订阅号"),c["default"].createElement("option",{value:g.MP.SERVICE},"服务号")))),c["default"].createElement("div",{className:"inline fields"},c["default"].createElement("div",{className:"four wide field"},c["default"].createElement("label",{htmlFor:"appId"},"appID")),c["default"].createElement("div",{className:"ten wide field"},c["default"].createElement("input",{id:"appId",type:"text",name:"appId",onChange:this.handleChange.bind(this),value:this.state.appId,placeholder:"微信公众号的appID"}))),c["default"].createElement("div",{className:"inline fields"},c["default"].createElement("div",{className:"four wide field"},c["default"].createElement("label",{htmlFor:"appSecret"},"appSecret")),c["default"].createElement("div",{className:"ten wide field"},c["default"].createElement("input",{id:"appSecret",type:"text",name:"appSecret",onChange:this.handleChange.bind(this),value:this.state.appSecret,placeholder:"微信公众号的appSecret"}))),c["default"].createElement("div",{className:"inline fields"},c["default"].createElement("div",{className:"four wide field"},c["default"].createElement("label",{htmlFor:"token"},"Token")),c["default"].createElement("div",{className:"twelve wide field"},c["default"].createElement("div",{className:"ui action input"},c["default"].createElement("input",{id:"token",type:"text",name:"token",onChange:this.handleChange.bind(this),value:this.state.token,placeholder:"Token"}),c["default"].createElement("button",{className:"ui basic button",onClick:this.handleRandomToken.bind(this)},"随机生成")))),c["default"].createElement("div",{className:"ui section divider"}),c["default"].createElement("input",{ref:"formulaId",type:"hidden",value:this.state.objectId}),c["default"].createElement("button",{className:"ui positive button left floated",onClick:this.handleSave.bind(this),disabled:!this.state.name||!this.state.token},"保存"),c["default"].createElement("button",{className:"ui button right floated",onClick:this.handleCancel.bind(this)},"取消"),c["default"].createElement(m["default"],null),c["default"].createElement(v["default"],{message:this.state.error}))))}}]),t}(u.Component);y.displayName="BindForm",t["default"]=y,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},u=n(1),c=a(u),d=n(7),f=a(d),p=n(6),m=a(p),h=n(4),v=n(16),b=a(v);n(78);var g=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),l(t,[{key:"render",value:function(){var e="",t=this.props.message,n="message";switch(t.type){case"text":e=c["default"].createElement("div",{className:"text"},t.content);break;case"voice":e=c["default"].createElement("div",{className:"text"},t.recognition);break;case"image":e=c["default"].createElement("div",{className:"ui medium rounded image "+n+"--image"},c["default"].createElement("img",{src:t.image}))}var a=c["default"].createElement("div",{className:"comment "+n+" "+n+"--common "+(t.user&&t.user.self?n+"--self":"")},c["default"].createElement("div",{className:"content "+n+"--bubble"},e),c["default"].createElement(b["default"],null));return t.user&&(a=c["default"].createElement("div",{className:"comment "+n+" "+(t.user&&t.user.self?n+"--self":"")},c["default"].createElement("a",{className:"avatar"},c["default"].createElement("img",{src:t.user.headimgurl})),c["default"].createElement("div",{className:"content"},c["default"].createElement("a",{className:"author",onClick:this.props.handleReply.bind(this,t.user)},t.user.nickname),c["default"].createElement("div",{className:"metadata"},c["default"].createElement("span",{className:"date"},t.time)),e))),a}}]),t}(u.Component),y=function(e){function t(e,n){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.state={input:"",replies:[],scroll:!0,scroll_show:!1}}return i(t,e),l(t,[{key:"scrollToBottom",value:function(){if(this.state.scroll){var e=this.refs.REF_MESSAGES.getDOMNode();e.scrollTop=e.scrollHeight}}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"componentDidMount",value:function(){!function(e){(0,m["default"])(e.refs.REF_MESSAGES_CONTAINER.getDOMNode()).hover(function(){e.setState({scroll_show:!0})},function(){e.setState({scroll_show:!1})})}(this)}},{key:"handleReply",value:function(e){var t=this.state.replies;t.push(e),this.setState({replies:t});var n=e.nickname,a=this.refs.REF_MESSAGE_INPUT.getDOMNode(),r=(0,h.getInputSelection)(a),o="@"+n,i=this.state.input.substring(0,r.start)+" "+o+" "+this.state.input.substring(r.end);this.setState({input:i}),(0,h.setSelectRange)(a,r.start,r.start+o.length)}},{key:"handleChange",value:function(e){this.setState(r({},e.target.name,e.target.value));
}},{key:"handleChangeCheckbox",value:function(e){this.setState(r({},e.target.name,e.target.checked))}},{key:"handleSendByClick",value:function(e){e.preventDefault(),this.send()}},{key:"handleSendByKeyDown",value:function(e){13===e.which&&this.send()}},{key:"send",value:function(){var e=this.state,t=e.replies,n=e.input,a=this.props,r=a.bind,o=a.handleSendMessage;n&&(f["default"].isEmpty(t)||(t=f["default"].uniq(t,"openid"),t=f["default"].filter(t,function(e){return-1!==n.indexOf("@"+e.nickname)&&r.appId!==e.openid})),o(n,t),this.setState({input:"",replies:[]}))}},{key:"render",value:function(){var e="messages",t=this.props.messages,n=this.handleReply.bind(this);return c["default"].createElement("div",{className:"ui segment",ref:"REF_MESSAGES_CONTAINER"},c["default"].createElement("div",{className:e+"__controls "+(this.state.scroll_show?"visible":"hidden")},c["default"].createElement("div",{className:"ui toggle checkbox"},c["default"].createElement("input",{type:"checkbox",name:"scroll",checked:this.state.scroll,onChange:this.handleChangeCheckbox.bind(this),id:"scroll"}),c["default"].createElement("label",{htmlFor:"scroll"},"开始滚屏"))),c["default"].createElement("div",{className:"ui comments "+e+"__content"},c["default"].createElement("div",{className:e,ref:"REF_MESSAGES"},t.map(function(e){return c["default"].createElement(g,{message:e,key:e.msgid,handleReply:n})})),c["default"].createElement("form",{className:"ui reply form"},c["default"].createElement("div",{className:"field"},c["default"].createElement("div",{className:"ui action input"},c["default"].createElement("input",{type:"text",placeholder:"跟大家互动一下吧...",value:this.state.input,name:"input",ref:"REF_MESSAGE_INPUT",onKeyDown:this.handleSendByKeyDown.bind(this),onChange:this.handleChange.bind(this)}),c["default"].createElement("button",{className:"ui basic button",onClick:this.handleSendByClick.bind(this)},"发送"))))))}}]),t}(u.Component);t["default"]=y,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},u=n(1),c=r(u),d=n(7),f=r(d),p=n(6),m=r(p),h=n(14),v=n(17),b=r(v),g=n(16),y=(r(g),n(5)),E=n(19),O=a(E),_=n(11),w=a(_);n(81),n(38),n(37);var P=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.refs.REF_USER_DROPDOWN_MENU&&(0,m["default"])(this.refs.REF_USER_DROPDOWN_MENU.getDOMNode()).dropdown()}},{key:"componentDidUpdate",value:function(){this.refs.REF_USER_DROPDOWN_MENU&&(0,m["default"])(this.refs.REF_USER_DROPDOWN_MENU.getDOMNode()).dropdown("refresh")}},{key:"handleSignOut",value:function(e){var t=this.props,n=t.dispatch,a=t.history;n(O.signOut()).then(function(){n(w.removeBinds()),a.pushState(null,"/signin")})}},{key:"render",value:function(){var e="app",t=this.props,n=t.children,a=t.dispatch,r=t.user,o=t.binds,i=t.messages,l="";n&&(l=c["default"].cloneElement(n,{dispatch:a,user:r,binds:o,messages:i}));var s=c["default"].createElement("div",{className:"right menu"},c["default"].createElement(y.Link,{to:"signin",className:"item",activeClassName:"active"},"登录"),c["default"].createElement(y.Link,{to:"signup",className:"item",activeClassName:"active"},"注册"));return f["default"].isEmpty(this.props.user)||(s=c["default"].createElement("div",{className:"right menu"},c["default"].createElement("div",{ref:"REF_USER_DROPDOWN_MENU",className:"ui dropdown item"},this.props.user.username,c["default"].createElement("i",{className:"dropdown icon"}),c["default"].createElement("div",{className:"menu"},c["default"].createElement("a",{className:"item",onClick:this.handleSignOut.bind(this)},"退出"))))),c["default"].createElement("div",{className:""+e},c["default"].createElement("div",{className:"ui menu stackable"},c["default"].createElement("div",{className:"ui text container"},c["default"].createElement(y.IndexLink,{to:"/",className:"header item"},c["default"].createElement(b["default"],{name:"rose",size:"m"}),"Barrage"),s)),c["default"].createElement("div",{className:"ui text container"},l))}}]),t}(u.Component);P.displayName="App",P.propTypes={dispatch:u.PropTypes.func.isRequired,user:u.PropTypes.object.isRequired,binds:u.PropTypes.array.isRequired,messages:u.PropTypes.array.isRequired},t["default"]=(0,h.connect)(function(e){return{user:e.user,binds:e.binds,messages:e.messages}})(P),e.exports=t["default"]},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},u=n(1),c=r(u),d=n(3),f=n(42),p=r(f),m=(n(4),n(11)),h=a(m),v=n(8),b=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.binds,n=e.history,a=e.dispatch,r=e.params,o=(0,d.bindActionCreators)(h,a),i={objectId:"",name:"",token:"",type:v.MP.COMMON},l=c["default"].createElement(p["default"],{actions:o,history:n,bind:i});return r.id&&(i=_.find(t,{objectId:r.id}),l=i?c["default"].createElement(p["default"],{actions:o,history:n,bind:i}):c["default"].createElement("div",{className:"ui active loader"})),c["default"].createElement("div",null,l)}}]),t}(u.Component);b.displayName="BindEditorPage",t["default"]=b,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},u=n(1),c=r(u),d=n(25),f=r(d),p=n(3),m=n(11),h=a(m),v=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.history,a=(0,p.bindActionCreators)(h,t),r=c["default"].createElement("div",null);return this.props.bind&&(r=c["default"].createElement(f["default"],{bind:this.props.bind,actions:a,history:n})),c["default"].createElement("div",null,r)}}]),t}(u.Component);v.displayName="BindPage",t["default"]=v,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},s=n(1),u=a(s),c=n(25),d=(a(c),n(5)),f=function(e){function t(e,n){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return o(t,e),i(t,[{key:"render",value:function(){var e=_.find(this.props.binds,{objectId:this.props.params.id}),t=u["default"].createElement("div",{className:"ui active loader"});if(e){var n=u["default"].createElement("div",null);this.props.children&&(n=u["default"].cloneElement(this.props.children,{messages:this.props.messages,bind:e})),t=u["default"].createElement("div",null,u["default"].createElement("div",{className:"ui pointing menu"},u["default"].createElement(d.Link,{to:"/dashboard/binds/"+e.objectId+"/index",className:"item",activeClassName:"active"},"设置"),u["default"].createElement(d.Link,{to:"/dashboard/binds/"+e.objectId+"/chat",className:"item",activeClassName:"active"},"聊天")),n)}return u["default"].createElement("div",null,t)}}]),t}(s.Component);f.displayName="BindPageContainer",t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},u=n(1),c=r(u),d=n(43),f=r(d),p=(n(3),n(26)),m=a(p),h=n(8),v=(n(4),function(e){function t(e,n){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return i(t,e),l(t,[{key:"componentWillMount",value:function(){h.PUSH.subscribe([this.props.params.id],function(){console.log("订阅成功")}),h.PUSH.open(function(){console.log("打开成功")}),this.props.dispatch(m.fetchAPIMessages(this.props.params.id))}},{key:"componentDidMount",value:function(){var e=this.props.dispatch;h.PUSH.on("message",function(t){e(m.createMessage(t))})}},{key:"componentWillUnmount",value:function(){h.PUSH.unsubscribe(this.props.params.id,function(){return console.log("取消订阅成功")}),h.PUSH.close(),this.props.dispatch(m.removeMessages())}},{key:"handleSendMessage",value:function(e,t){var n=this.props,a=(n.dispatch,n.bind),r="text";a.type<h.MP.SERVICE&&(t=[]),m.fetchAPIMessageSend(a.objectId,{content:e,type:r,replies:t})}},{key:"render",value:function(){var e=this.props,t=e.messages,n=e.bind;return c["default"].createElement(f["default"],{bind:n,messages:t,handleSendMessage:this.handleSendMessage.bind(this)})}}]),t}(u.Component));v.displayName="ChatPage",t["default"]=v,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},u=n(1),c=r(u),d=n(17),f=r(d),p=n(16),m=(r(p),n(18)),h=r(m),v=n(5),b=n(11),g=a(b),y=function(e){function t(e,n){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),_.isEmpty(this.props.user)&&this.props.history.pushState(null,"/signin"),this.state={error:""}}return i(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this;!function(t){t.props.dispatch(g.fetchAPIBinds(e.props.user)).then(function(e){})["catch"](function(e){t.setState({error:e.message})})}(this)}},{key:"render",value:function(){var e="dashboard",t=this.props,n=t.children,a=t.dispatch,r=t.user,o=t.binds,i=t.messages,l="";o.length>0&&(l=c["default"].createElement("div",null,c["default"].createElement("h5",{className:"ui horizontal divider header",style:{width:"15rem"}},"已绑定的公众号"),c["default"].createElement("div",{className:"ui vertical menu"},o.map(function(e){return c["default"].createElement(v.Link,{to:"/dashboard/binds/"+e.objectId,className:"item",key:e.objectId,activeClassName:"active"},e.name," ",c["default"].createElement("i",{className:"angle right icon"}))}))));var s=c["default"].createElement("h2",{className:e+"__content__empty"},"试试左边的按钮？",c["default"].createElement(f["default"],{name:"doge",size:"l"}));return n&&(s=c["default"].cloneElement(n,{dispatch:a,user:r,binds:o,messages:i})),c["default"].createElement("div",{className:e},c["default"].createElement("div",{className:"ui grid"},c["default"].createElement("div",{className:"ui column six wide"},c["default"].createElement("div",{className:"ui vertical menu text"},c["default"].createElement(v.Link,{className:"item",to:"/dashboard/binds/create"},c["default"].createElement("i",{className:"plus icon"})," 创建一个新的公众号绑定")),l),c["default"].createElement("div",{className:"ui column ten wide"},c["default"].createElement(h["default"],{message:this.state.error}),s)))}}]),t}(u.Component);y.displayName="DashboardPage",t["default"]=y,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},s=n(1),u=a(s),c=n(17),d=a(c),f=function(e){function t(){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"ui centered aligned grid"},u["default"].createElement("div",{className:"six wide column"},u["default"].createElement("div",{className:"ui statistic"},u["default"].createElement("div",{className:"value"},u["default"].createElement(d["default"],{name:"paperplane-outline",size:"l"})," 404"),u["default"].createElement("div",{className:"label"},"Not Found"))))}}]),t}(s.Component);f.displayName="NoMatchPage",t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},c=n(1),d=r(c),f=(n(3),n(14),n(19)),p=a(f),m=n(17),h=(r(m),n(18)),v=r(h),b=n(5),g=function(e){function t(e,n){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),_.isEmpty(this.props.user)||this.props.history.pushState(null,"/dashboard"),this.state={username:"",password:"",error:"",loading:!1}}return l(t,e),s(t,[{key:"handleSignIn",value:function(e){var t=this;e.preventDefault();var n=this.state,a=n.username,r=n.password;return this.setState({loading:!0,error:""}),function(e){e.props.dispatch(p.signIn({username:a,password:r})).then(function(e){t.props.history.pushState(null,"/dashboard")})["catch"](function(t){e.setState({error:t.message})}).then(function(){e.setState({loading:!1})})}(this)}},{key:"handleChange",value:function(e){this.setState(o({},e.target.name,e.target.value))}},{key:"render",value:function(){var e="sign";return d["default"].createElement("div",{className:"ui centered aligned grid "+e},d["default"].createElement("div",{className:"ten wide column "+e+"__content"},d["default"].createElement("h2",{className:"ui horizontal divider header"},"登录"),d["default"].createElement("div",{className:"ui segment attached stacked"},d["default"].createElement("div",{className:"ui inverted dimmer "+(this.state.loading?"active":"")},d["default"].createElement("div",{className:"ui loader"})),d["default"].createElement("form",{className:"ui form"},d["default"].createElement("div",{className:"field required"},d["default"].createElement("label",{htmlFor:"username"},"用户名"),d["default"].createElement("input",{id:"username",type:"text",name:"username",onChange:this.handleChange.bind(this),value:this.state.username,placeholder:"用户名"})),d["default"].createElement("div",{className:"field required"},d["default"].createElement("label",{htmlFor:"password"},"密码"),d["default"].createElement("input",{id:"password",type:"password",name:"password",onChange:this.handleChange.bind(this),value:this.state.password,placeholder:"密码"})),d["default"].createElement("button",{className:"ui fluid large teal submit button",onClick:this.handleSignIn.bind(this),disabled:!this.state.username||!this.state.password},"登录"),d["default"].createElement(v["default"],{message:this.state.error}))),d["default"].createElement("div",{className:"ui message bottom attached"},"新用户? ",d["default"].createElement(b.Link,{to:"signup"},"注册"))))}}]),t}(c.Component);g.displayName="SignInPage",g.propTypes={dispatch:c.PropTypes.func.isRequired},t["default"]=g,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=function(e,t,n){for(var a=!0;a;){var r=e,o=t,i=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=i,a=!0,l=u=void 0}},c=n(1),d=r(c),f=(n(3),n(14),n(19)),p=a(f),m=n(5),h=n(18),v=r(h),b=function(e){function t(e,n){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),_.isEmpty(this.props.user)||this.props.history.pushState(null,"/dashboard"),this.state={username:"",email:"",password:"",error:"",loading:!1}}return l(t,e),s(t,[{key:"handleSignUp",value:function(e){e.preventDefault();var t=this.state,n=t.username,a=t.email,r=t.password;return this.setState({loading:!0,error:""}),function(e){e.props.dispatch(p.signUp({username:n,email:a,password:r})).then(function(t){e.props.history.pushState(null,"/dashboard")})["catch"](function(t){e.setState({error:t.message})}).then(function(){e.setState({loading:!1})})}(this)}},{key:"handleChange",value:function(e){this.setState(o({},e.target.name,e.target.value))}},{key:"render",value:function(){var e="sign";return d["default"].createElement("div",{className:"ui centered aligned grid "+e},d["default"].createElement("div",{className:"ten wide column "+e+"__content"},d["default"].createElement("h2",{className:"ui horizontal divider header"},"注册"),d["default"].createElement("div",{className:"ui segment stacked"},d["default"].createElement("div",{className:"ui inverted dimmer "+(this.state.loading?"active":"")},d["default"].createElement("div",{className:"ui loader"})),d["default"].createElement("form",{className:"ui form"},d["default"].createElement("div",{className:"field required"},d["default"].createElement("label",{htmlFor:"username"},"用户名"),d["default"].createElement("input",{id:"username",type:"text",name:"username",onChange:this.handleChange.bind(this),value:this.state.username,placeholder:"用户名"})),d["default"].createElement("div",{className:"field required"},d["default"].createElement("label",{htmlFor:"email"},"邮箱"),d["default"].createElement("input",{id:"email",type:"text",name:"email",onChange:this.handleChange.bind(this),value:this.state.email,placeholder:"邮箱"})),d["default"].createElement("div",{className:"field required"},d["default"].createElement("label",{htmlFor:"password"},"密码"),d["default"].createElement("input",{id:"password",type:"password",name:"password",onChange:this.handleChange.bind(this),value:this.state.password,placeholder:"密码"})),d["default"].createElement("button",{className:"ui fluid large teal submit button",onClick:this.handleSignUp.bind(this),disabled:!this.state.username||!this.state.password||!this.state.email},"注册"),d["default"].createElement(v["default"],{message:this.state.error}))),d["default"].createElement("div",{className:"ui message"},"已经注册? ",d["default"].createElement(m.Link,{to:"signin"},"登录"))))}}]),t}(c.Component);b.displayName="SignUpPage",b.propTypes={dispatch:c.PropTypes.func.isRequired},t["default"]=b,e.exports=t["default"]},function(e,t,n){var a,r;void function(n){var o="2.0.4",i=n.AV||{};n.AV=i,a=[],r=function(){return i}.apply(t,a),!(void 0!==r&&(e.exports=r));var l={heartbeatsTime:3e4},s={},u={},c={open:"open",close:"close",message:"message",reuse:"reuse",error:"error"},d=function(){var e={options:void 0,ws:void 0,heartbeatsTimer:void 0,ec:void 0,closeFlag:!1,reuseTimer:void 0},t=function(){s.log("WebSocket opened."),u.loginPush(e.options),u.heartbeats(),u.guard(),e.ec.emit(c.open)},a=function(){s.log("WebSocket closed."),e.ec.emit(c.close)},r=function(t){var n=JSON.parse(t.data);if("data"===n.cmd){u.ackPush(n.ids);var a,r=n.msg.length;for(a=0;r>a;a++)e.ec.emit(c.message,n.msg[a])}},o=function(e){throw e},i=function(t){e.ws.send(JSON.stringify(t))},d=function(e,t,n){var a=[];"string"==typeof e?a.push(e):a=e,u.channels(a,t,n)};return u.getId=function(e){var t="AV/"+e.appId+"/installationId",n=s.storage(t);if(n)return n;var a=s.getId();return e.id=a,u.sendId(e,function(e){s.storage(t,a)}),a},u.sendId=function(t,n){s.ajax({url:"https://"+e.options.host+"/1.1/installations",method:"post",appId:t.appId,appKey:t.appKey,data:{deviceType:t.deviceType,installationId:t.id,channels:t.channels}},function(a){a?n&&(n(a),e.ec.emit("leancloud-send-id-ok")):setTimeout(function(){u.sendId(t)},5e3)})},u.sendPush=function(t,n){s.ajax({url:"https://"+e.options.host+"/1.1/push",method:"post",appId:t.appId,appKey:t.appKey,data:{data:t.data,channels:t.channels}},function(e,a){if(e)n&&n(e);else{if(403===a.code||404===a.code)throw a.error;setTimeout(function(){u.sendPush(t,n)},5e3)}})},u.channels=function(t,n,a){var r={installationId:e.options.id,deviceType:e.options.deviceType};a?r.channels={__op:"Remove",objects:t}:r.channels=t,s.ajax({url:"https://"+e.options.host+"/1.1/installations",method:"post",appId:e.options.appId,appKey:e.options.appKey,data:r},function(e){n&&n(e)})},u.createSocket=function(n){var i=new WebSocket(n);e.ws=i,i.addEventListener("open",t),i.addEventListener("close",a),i.addEventListener("message",r),i.addEventListener("error",o)},u.heartbeats=function(){i({}),e.ws.addEventListener("message",function(){e.heartbeatsTimer&&clearTimeout(e.heartbeatsTimer),e.heartbeatsTimer=setTimeout(function(){i({})},l.heartbeatsTime)})},u.guard=function(){e.ec.on(c.close,function(){e.closeFlag||e.ec.emit(c.reuse)})},u.connect=function(t){var n=t.server;if(!(n&&s.now()<n.expires))throw e.ec.emit(c.error),"WebSocket connet failed.";u.createSocket(n.server)},u.ackPush=function(t){i({cmd:"ack",appId:e.options.appId,installationId:e.options.id,ids:t})},u.loginPush=function(e){i({cmd:"login",appId:e.appId,installationId:e.id})},u.getServer=function(t,a){var r=t.appId,o=t.secure,i="",l="http://";n&&"https:"===n.location.protocol&&(l="https://");var u="";switch(t.region){case"cn":u="g0";break;case"us":u="a0";break;default:throw"There is no this region."}i=l+"router-"+u+"-push.leancloud.cn/v1/route?appId="+r,o&&(i+="&secure=1"),s.ajax({url:i},function(t,n){if(t)t.expires=s.now()+1e3*t.ttl,e.server=t,a(t);else{if(403===n.code||404===n.code)throw n.error;e.ec.emit(c.error)}})},{installationId:"",cache:e,open:function(t){var n=this;return u.getServer(e.options,function(t){t&&u.connect({server:e.server})}),t&&e.ec.on(c.open,t),e.ec.once(c.reuse+" "+c.error,function(){e.reuseTimer&&clearTimeout(e.reuseTimer),e.reuseTimer=setTimeout(function(){n.open()},5e3)}),this},close:function(){return e.closeFlag=!0,e.ws.close(),this},on:function(t,n){return e.ec.on(t,n),this},once:function(t,n){return e.ec.once(t,n),this},off:function(t,n){return e.ec.off(t,n),this},emit:function(t,n){return e.ec.emit(t,n),this},send:function(t,n){var a={appId:e.options.appId,appKey:e.options.appKey};if(t.channels||t.where||t.expiration_time||t.expiration_interval||t.push_time){for(var r in t)a[r]=t[r];u.sendPush(a,n)}else a.data=t,u.sendPush(a,n);return this},subscribe:function(e,t){return d(e,t),this},unsubscribe:function(e,t){return d(e,t,!0),this},receive:function(t){if(!t)throw"Receive must hava callback.";return e.ec.on(c.message,function(e){t(e)}),this}}};i.push=function(e){if("object"!=typeof e)throw"AV.push need a argument at least.";if(e.appId){if(e.appKey){var t=n.WebSocket.loadFlashPolicyFile?!1:!0;switch(e={appId:e.appId,appKey:e.appKey,peerId:e.clientId,secure:"undefined"==typeof e.secure?t:e.secure,region:e.region||"cn",channels:e.channels||[],deviceType:"web"},e.region){case"cn":e.host="leancloud.cn";break;case"us":e.host="avoscloud.us"}var a=d();return a.cache.options=e,e.id=u.getId(e),a.installationId=e.id,a.cache.ec=s.eventCenter(),a}throw"Options must have appKey."}throw"Options must have appId."},i.push.version=o,i.push._tool=s,i.push._engine=u,s.noop=function(){},s.getId=function(){var e=function(){return Date.now().toString(36)+Math.random().toString(36).substring(2,3)};return"AV-"+e()+"-"+e()+"-"+e()},s.log=function(e){console.log(e)},s.ajax=function(e,t){var n=e.url,a=e.method||"get",r=new XMLHttpRequest;r.open(a,n),("post"===a||"put"===a)&&r.setRequestHeader("Content-Type","application/json"),e.appId&&r.setRequestHeader("X-AVOSCloud-Application-Id",e.appId),
e.appKey&&r.setRequestHeader("X-AVOSCloud-Application-Key",e.appKey),r.onprogress=function(){},r.ontimeout=function(){},r.timeout=0,r.onload=function(e){r.status>=200&&r.status<300?t(JSON.parse(r.responseText)):t(null,JSON.parse(r.responseText))},r.onerror=function(e){throw t(null,e),"Network error."},r.send(JSON.stringify(e.data))},s.now=function(){return Date.now()},s.storage=function(e,t){if(!t){var a=n.localStorage.getItem(e);return/^[\{|\[]/.test(a)&&/[\}|\]]$/.test(a)&&(a=JSON.parse(a)),a}"object"==typeof t&&(t=JSON.stringify(t)),n.localStorage.setItem(e,t)},s.eventCenter=function(){function e(e){var t=[],n=0,a=e.length;if(a){for(;a>n;n++)e[n]&&t.push(e[n]);return t}return null}var t={},n={},a=function(e,a,r){if(!e)throw"No event name.";if(!a)throw"No callback function.";var o,i=e.split(/\s+/);o=r?n:t;for(var l=0,s=i.length;s>l;l++)i[l]&&(o[i[l]]||(o[i[l]]=[]),o[i[l]].push(a))},r=function(e,a,r){var o;if(o=r?n:t,o[e])for(var i=0,l=o[e].length;l>i;i++)if(o[e][i]===a)return void(o[e][i]=null)};return{on:function(e,t){return a(e,t),this},once:function(e,t){return a(e,t,!0),this},emit:function(a,o){if(!a)throw"No emit event name.";var i=0,l=0;if(t[a]){for(i=0,l=t[a].length;l>i;i++)t[a][i]&&t[a][i].call(this,o);t[a]=e(t[a])}if(n[a]){for(i=0,l=n[a].length;l>i;i++)n[a][i]&&(n[a][i].call(this,o),r(a,n[a][i],!0));n[a]=e(n[a])}return this},off:function(e,t){return r(e,t),this}}}}(window)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(19),i=a(o),l=n(11),s=a(l),u=n(26),c=a(u);t["default"]=(0,r.combineReducers)({user:i["default"],binds:s["default"],messages:c["default"]}),e.exports=t["default"]},function(e,t,n){t=e.exports=n(12)(),t.push([e.id,".bindCard{width:100%}",""])},function(e,t,n){t=e.exports=n(12)(),t.push([e.id,'.messages{height:400px;overflow:auto}.messages__controls{position:absolute;top:15px;right:-141px;padding:10px;border:1px solid #ececec;border-left:none;background:#fff}.messages__controls.hidden{display:none}.messages__controls.visible{display:block}.messages__content{margin-top:0!important}.message--image{margin-top:10px}.message--common{margin-left:8px!important}.message--bubble{position:relative;padding:10px 20px;background:RGBA(77,169,227,1);border-radius:25px;float:left;box-shadow:1px 1px 5px #999}.message--bubble:before{z-index:2;left:-7px;border-left:20px solid RGBA(77,169,227,1);border-bottom-right-radius:16px 14px;-webkit-transform:translateY(-2px);transform:translateY(-2px)}.message--bubble:after,.message--bubble:before{content:"";position:absolute;bottom:-2px;height:20px}.message--bubble:after{z-index:3;left:4px;width:26px;background:#fff;border-bottom-right-radius:10px;-webkit-transform:translate(-30px,-2px);transform:translate(-30px,-2px)}.message--bubble .text{color:#fff!important}.message--self{background-color:RGBA(84,178,77,.8)!important;margin-top:20px!important;padding:10px!important;border-radius:5px}.message--self .avatar img{border-radius:500px!important}.message--self .author,.message--self .metadata,.message--self .text{color:#fff!important}',""])},function(e,t,n){t=e.exports=n(12)(),t.push([e.id,".clearfix{clear:both}",""])},function(e,t,n){t=e.exports=n(12)(),t.push([e.id,"@keyframes spin{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.icon{display:inline-block;width:25px;height:25px;fill:currentColor;vertical-align:middle}.icon__cnt{width:100%;height:100%;background:inherit;fill:inherit;pointer-events:none;-webkit-transform:translateX(0);transform:translateX(0);-ms-transform:translate(.5px,-.3px)}.icon--s{width:20px;height:20px}.icon--ms{width:25px;height:25px}.icon--m{width:50px;height:50px}.icon--l{width:100px;height:100px}.icon--xl{width:150px;height:150px}.icon--xxl{width:200px;height:200px}.icon__spinner{position:absolute;top:0;left:0;width:100%;height:100%}.icon__spinner--pulse{-webkit-animation:spin 1s infinite steps(8);animation:spin 1s infinite steps(8)}.icon__spinner--spin{-webkit-animation:spin 2s infinite linear;animation:spin 2s infinite linear}",""])},function(e,t,n){t=e.exports=n(12)(),t.push([e.id,".sign{height:100%}.sign__content{margin-top:2.5rem}.dashboard{margin-top:4rem}.dashboard__content__empty{padding:5rem;color:rgba(0,0,0,.7);font-weight:400;text-shadow:5px 2px 5px #939696}.dashboard__icon-fix__menu-left{margin-top:-3px}.dashboard__icon-fix__menu-left-2{width:1.18em;float:right;margin:-3px 0 0 .5em;opacity:.9}.bind{width:100%!important}#app{width:100%}#app,.app{height:100%}",""])},,,,,,,,,,,,,,,,,,function(e,t,n){var a=n(55);"string"==typeof a&&(a=[[e.id,a,""]]);n(15)(a,{});a.locals&&(e.exports=a.locals)},function(e,t,n){var a=n(56);"string"==typeof a&&(a=[[e.id,a,""]]);n(15)(a,{});a.locals&&(e.exports=a.locals)},function(e,t,n){var a=n(57);"string"==typeof a&&(a=[[e.id,a,""]]);n(15)(a,{});a.locals&&(e.exports=a.locals)},function(e,t,n){var a=n(58);"string"==typeof a&&(a=[[e.id,a,""]]);n(15)(a,{});a.locals&&(e.exports=a.locals)},function(e,t,n){var a=n(59);"string"==typeof a&&(a=[[e.id,a,""]]);n(15)(a,{});a.locals&&(e.exports=a.locals)},,function(e,t){t.MP={COMMON:1,SUBSCRIPTION:2,SERVICE:3}}]);